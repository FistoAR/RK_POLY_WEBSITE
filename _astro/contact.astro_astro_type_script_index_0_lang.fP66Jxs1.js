import{g as n,S as y}from"./ScrollTrigger.C0eCJjti.js";n.registerPlugin(y);let S=[];function H(){const o=document.getElementById("contactForm");if(!o)return;const a=o.dataset.formsubmitEmail,l=o.dataset.siteUrl||window.location.origin,d=o.dataset.isProd==="true",m=document.getElementById("successMessage"),h=document.getElementById("errorMessage"),p=document.getElementById("errorText"),f=document.getElementById("activationNotice"),E=document.getElementById("activationEmail"),b=document.getElementById("submitBtn"),w=document.getElementById("btnText"),B=document.getElementById("btnArrow"),k=document.getElementById("btnSpinner"),g=document.getElementById("charCounter"),C=document.getElementById("message"),$=document.getElementById("sendAnotherBtn"),_=document.getElementById("retryBtn");if(!b||!a){console.error("Form configuration missing");return}if(C&&g){const e=()=>{const t=C.value.length,i=1e3;g.textContent=`(${t}/${i})`,t>900?g.className="text-orange-500 text-xs font-normal ml-2":t>800?g.className="text-yellow-500 text-xs font-normal ml-2":g.className="text-gray-400 text-xs font-normal ml-2"};C.addEventListener("input",e),e()}function O(e,t){const i={success:"bg-green-500",error:"bg-red-500",info:"bg-blue-500"},s=document.createElement("div");s.className=`fixed top-4 right-4 z-50 ${i[t]} text-white px-6 py-3 rounded-lg shadow-lg transform translate-x-full`,s.textContent=e,document.body.appendChild(s),n.to(s,{x:0,duration:.4,ease:"power2.out",onComplete:()=>{n.to(s,{x:"100%",delay:3,duration:.4,ease:"power2.in",onComplete:()=>s.remove()})}})}const q=new URLSearchParams(window.location.search);q.get("activated")==="true"&&(O("Email activated successfully! You can now send messages.","success"),window.history.replaceState({},document.title,window.location.pathname)),q.get("success")==="true"&&(T(),window.history.replaceState({},document.title,window.location.pathname));const P=e=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e),j=e=>e?/^[+]?[\d\s\-\(\)]{10,}$/.test(e.replace(/\s/g,"")):!0,v=(e,t)=>{const i=document.getElementById(e),s=i?.parentElement?.parentElement?.querySelector(".field-error");if(i&&s){i.classList.add("border-red-400","focus:border-red-500","focus:ring-red-500/10"),i.classList.remove("border-gray-200","focus:border-[#3cb4e5]","focus:ring-[#3cb4e5]/10"),s.innerHTML=`
          <svg class="w-3.5 h-3.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
          </svg>
          ${t}
        `,s.classList.remove("hidden"),n.fromTo(i,{x:-8},{x:0,duration:.5,ease:"elastic.out(1, 0.3)"});const c=()=>{i.classList.remove("border-red-400","focus:border-red-500","focus:ring-red-500/10"),i.classList.add("border-gray-200","focus:border-[#3cb4e5]","focus:ring-[#3cb4e5]/10"),s.classList.add("hidden"),i.removeEventListener("input",c),i.removeEventListener("change",c)};i.addEventListener("input",c),i.addEventListener("change",c)}},D=()=>{o.querySelectorAll(".field-error").forEach(e=>{e.classList.add("hidden")}),o.querySelectorAll(".border-red-400").forEach(e=>{e.classList.remove("border-red-400","focus:border-red-500","focus:ring-red-500/10"),e.classList.add("border-gray-200","focus:border-[#3cb4e5]","focus:ring-[#3cb4e5]/10")})},V=()=>{D();const e=document.getElementById("name")?.value.trim(),t=document.getElementById("email")?.value.trim(),i=document.getElementById("subject")?.value,s=document.getElementById("message")?.value.trim(),c=document.getElementById("phone")?.value.trim();let u=!0,r=null;return(!e||e.length<2)&&(v("name","Please enter your full name (at least 2 characters)"),r||(r="name"),u=!1),t?P(t)||(v("email","Please enter a valid email address"),r||(r="email"),u=!1):(v("email","Please enter your email address"),r||(r="email"),u=!1),c&&!j(c)&&(v("phone","Please enter a valid phone number"),r||(r="phone"),u=!1),i||(v("subject","Please select a subject"),r||(r="subject"),u=!1),(!s||s.length<10)&&(v("message","Please enter a message (at least 10 characters)"),r||(r="message"),u=!1),r&&document.getElementById(r)?.focus(),u},F=e=>{e?(b.disabled=!0,w&&(w.textContent="Sending..."),B?.classList.add("hidden"),k?.classList.remove("hidden"),b.classList.add("cursor-not-allowed")):(b.disabled=!1,w&&(w.textContent="Send Message"),B?.classList.remove("hidden"),k?.classList.add("hidden"),b.classList.remove("cursor-not-allowed"))},L=()=>{m?.classList.add("hidden"),h?.classList.add("hidden"),f?.classList.add("hidden")};function T(){L(),m?.classList.remove("hidden"),o&&o.reset(),g&&(g.textContent="(0/1000)",g.className="text-gray-400 text-xs font-normal ml-2"),n.fromTo(m,{y:-20,opacity:0,scale:.95},{y:0,opacity:1,scale:1,duration:.5,ease:"back.out(1.7)"}),setTimeout(()=>{m?.scrollIntoView({behavior:"smooth",block:"center"})},100),z()}const x=(e,t=!1)=>{L(),h?.classList.remove("hidden"),p&&(p.textContent=e),t&&f&&E&&(f.classList.remove("hidden"),E.textContent=a||"",n.fromTo(f,{y:-10,opacity:0},{y:0,opacity:1,duration:.4,delay:.2})),n.fromTo(h,{y:-20,opacity:0,scale:.95},{y:0,opacity:1,scale:1,duration:.5,ease:"back.out(1.7)"}),setTimeout(()=>{h?.scrollIntoView({behavior:"smooth",block:"center"})},100)},z=()=>{const e=m?.parentElement;if(!e||!m)return;const t=["#22c55e","#3cb4e5","#fbbf24","#a855f7","#ec4899"],i=25;for(let s=0;s<i;s++){const c=document.createElement("div");c.className="success-particle pointer-events-none",c.style.cssText=`
          position: absolute;
          width: ${6+Math.random()*6}px;
          height: ${6+Math.random()*6}px;
          background: ${t[Math.floor(Math.random()*t.length)]};
          border-radius: 50%;
          z-index: 60;
        `,e.style.position="relative",e.appendChild(c);const u=m.getBoundingClientRect(),r=e.getBoundingClientRect(),N=u.left-r.left+u.width/2,R=u.top-r.top;n.set(c,{x:N,y:R,scale:0}),n.to(c,{x:N+(Math.random()-.5)*300,y:R-50-Math.random()*150,scale:1,opacity:0,duration:.8+Math.random()*.4,ease:"power2.out",delay:Math.random()*.2,onComplete:()=>c.remove()})}};o.addEventListener("submit",async e=>{if(e.preventDefault(),!!V()){L(),F(!0);try{const t=new FormData(o);t.append("_subject",`New Contact Form Submission - ${t.get("inquiry_type")||"RK Poly Products"}`),t.append("_captcha","false"),t.append("_template","table"),t.append("_autoresponse",`Thank you for contacting RK Poly Products!

We have received your message regarding "${t.get("inquiry_type")}".

Our team will review your inquiry and get back to you within 24 hours.

In the meantime, feel free to:
- Call us: +91 8048976748
- WhatsApp: +91 8048976748
- Visit our website: https://rkpolyproducts.com

Best regards,
RK Poly Products Team`),t.append("_source",window.location.href),t.append("_timestamp",new Date().toISOString()),t.append("_next",`${l}/contact?success=true`);const i=`https://formsubmit.co/ajax/${a}`;console.log("[Contact Form] Submitting to:",i),console.log("[Contact Form] Environment:",d?"Production":"Development");const s=await fetch(i,{method:"POST",body:t,headers:{Accept:"application/json"}});console.log("[Contact Form] Response status:",s.status);const c=await s.text();console.log("[Contact Form] Response:",c.substring(0,200));let u;try{u=JSON.parse(c)}catch{if(c.toLowerCase().includes("activate")||c.toLowerCase().includes("confirm your email")){console.log("[Contact Form] Activation required"),x("This email needs to be activated for this domain. Check your inbox for the activation link.",!0);return}if(s.ok){T();return}throw new Error("Invalid response from server")}if(s.ok&&u.success){console.log("[Contact Form] Success!"),T();try{const r=JSON.parse(localStorage.getItem("rkpoly_submissions")||"[]");r.push({date:new Date().toISOString(),subject:t.get("inquiry_type")}),localStorage.setItem("rkpoly_submissions",JSON.stringify(r.slice(-10)))}catch{}}else{const r=u.message||"Failed to send message";r.toLowerCase().includes("activate")||r.toLowerCase().includes("confirm")||s.status===403||s.status===401?x("Email not activated for this domain. Please check your inbox for the activation email.",!0):x(r)}}catch(t){console.error("[Contact Form] Error:",t),t instanceof TypeError&&t.message.includes("fetch")?x("Network error. Please check your internet connection and try again."):t instanceof Error&&t.message.includes("timeout")?x("Request timed out. Please try again."):x("Failed to send message. Please try again or contact us directly via phone or email.")}finally{F(!1)}}}),$?.addEventListener("click",()=>{L(),o&&o.reset(),g&&(g.textContent="(0/1000)",g.className="text-gray-400 text-xs font-normal ml-2"),document.getElementById("name")?.focus(),o.scrollIntoView({behavior:"smooth",block:"start"})}),_?.addEventListener("click",()=>{L(),b?.focus()});const A=document.getElementById("name"),M=document.getElementById("email");A?.addEventListener("blur",()=>{const e=A.value.trim();e&&e.length<2&&v("name","Name must be at least 2 characters")}),M?.addEventListener("blur",()=>{const e=M.value.trim();e&&!P(e)&&v("email","Please enter a valid email address")})}function U(){const o=document.querySelectorAll(".faq-item");o.forEach(a=>{const l=a.querySelector(".faq-trigger"),d=a.querySelector(".faq-content"),m=a.querySelector(".faq-icon");!l||!d||!m||l.addEventListener("click",()=>{const h=!d.classList.contains("hidden");if(o.forEach(p=>{if(p!==a){const f=p.querySelector(".faq-content"),E=p.querySelector(".faq-icon");f?.classList.add("hidden"),n.to(E,{rotation:0,duration:.3})}}),h)n.to(d,{height:0,opacity:0,duration:.3,ease:"power2.inOut",onComplete:()=>{d.classList.add("hidden"),d.style.height=""}}),n.to(m,{rotation:0,duration:.3});else{d.classList.remove("hidden");const p=d.scrollHeight;n.fromTo(d,{height:0,opacity:0},{height:p,opacity:1,duration:.3,ease:"power2.inOut"}),n.to(m,{rotation:180,duration:.3})}})})}function J(){S.forEach(f=>f.kill()),S=[];const o=f=>{S.push(f)};n.timeline({defaults:{ease:"power3.out"}}).fromTo(".hero-breadcrumb",{y:-20,opacity:0},{y:0,opacity:1,duration:.5}).fromTo(".hero-title",{y:40,opacity:0},{y:0,opacity:1,duration:.7},"-=0.3").fromTo(".hero-subtitle",{y:30,opacity:0},{y:0,opacity:1,duration:.6},"-=0.4").fromTo(".hero-buttons",{y:20,opacity:0},{y:0,opacity:1,duration:.5},"-=0.3");const l=y.create({trigger:"#contact-section",start:"top 80%",onEnter:()=>{n.fromTo(".contact-form-wrapper",{x:-50,opacity:0},{x:0,opacity:1,duration:.8,ease:"power3.out"})},once:!0});o(l);const d=y.create({trigger:".contact-form-wrapper",start:"top 75%",onEnter:()=>{n.fromTo(".form-field",{y:25,opacity:0},{y:0,opacity:1,duration:.5,stagger:.08,ease:"power3.out"})},once:!0});o(d);const m=y.create({trigger:"#contact-section",start:"top 80%",onEnter:()=>{n.fromTo(".contact-card",{x:50,opacity:0},{x:0,opacity:1,duration:.6,stagger:.1,ease:"power3.out"})},once:!0});o(m);const h=y.create({trigger:"#map-section",start:"top 80%",onEnter:()=>{n.fromTo(".map-header",{y:30,opacity:0},{y:0,opacity:1,duration:.6,ease:"power3.out"}),n.fromTo(".map-container",{y:50,opacity:0,scale:.98},{y:0,opacity:1,scale:1,duration:.8,delay:.2,ease:"power3.out"})},once:!0});o(h);const p=y.create({trigger:".faq-item",start:"top 85%",onEnter:()=>{n.fromTo(".faq-item",{y:30,opacity:0},{y:0,opacity:1,duration:.5,stagger:.1,ease:"power3.out"})},once:!0});o(p),n.utils.toArray(".hero-blur").forEach((f,E)=>{const b=y.create({trigger:f,start:"top bottom",end:"bottom top",scrub:1,onUpdate:w=>{n.set(f,{y:-40*(E+1)*w.progress})}});o(b)}),y.refresh()}function K(){document.querySelectorAll("#contactForm input, #contactForm textarea, #contactForm select").forEach(a=>{a.closest(".form-field");const l=a.parentElement?.querySelector("svg");a.addEventListener("focus",()=>{l&&n.to(l,{color:"#3cb4e5",scale:1.1,duration:.2}),n.to(a,{scale:1.01,duration:.2,ease:"power2.out"})}),a.addEventListener("blur",()=>{l&&n.to(l,{color:"#9ca3af",scale:1,duration:.2}),n.to(a,{scale:1,duration:.2,ease:"power2.out"})})})}function W(){document.querySelectorAll(".contact-card").forEach(a=>{a.addEventListener("mouseenter",()=>{n.to(a,{y:-4,duration:.3,ease:"power2.out"})}),a.addEventListener("mouseleave",()=>{n.to(a,{y:0,duration:.3,ease:"power2.out"})})})}function Y(){document.querySelectorAll('a[href^="#"]').forEach(o=>{o.addEventListener("click",function(a){a.preventDefault();const l=this.getAttribute("href");if(!l||l==="#")return;const d=document.querySelector(l);d&&d.scrollIntoView({behavior:"smooth",block:"start"})})})}function I(){requestAnimationFrame(()=>{H(),U(),J(),K(),W(),Y(),console.log("[Contact Page] Initialized successfully")})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",I):I();document.addEventListener("astro:page-load",I);document.addEventListener("astro:before-swap",()=>{S.forEach(o=>o.kill()),S=[]});document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&y.refresh()});
